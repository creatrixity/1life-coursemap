{"version":3,"file":"static/webpack/static\\development\\pages\\coursemap.js.92a10207566542665526.hot-update.js","sources":["webpack:///./pages/coursemap/coursemap.tsx"],"sourcesContent":["import * as React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { bindActionCreators, Dispatch } from 'redux';\r\nimport Head from 'next/head';\r\nimport Link from 'next/link';\r\n\r\nimport { IHomePage, IStore } from '@Interfaces';\r\nimport { AppActions } from '@Actions';\r\nimport { ArrowRightIcon } from '@Components/Icons';\r\nimport {\r\n\tgetUser,\r\n\tgetToken\r\n} from '@Redux/utils'\r\n\r\nimport './coursemap.scss';\r\n\r\nexport class CoursemapPage extends React.Component<IHomePage.IProps, IHomePage.IState> {\r\n\tprivate coursemapModules:any = {};\r\n\tprivate course:string = '';\r\n\r\n\tconstructor (props:IHomePage.IProps) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tuserModules: []\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount () {\r\n\t\tif (!getToken()) return this.props.router.replace('/login')\r\n\r\n\t\tconst { app, router } = this.props;\r\n\t\tconst { coursemapModules } = app;\r\n\t\tconst { course } = router.query;\r\n\r\n\t\tthis.coursemapModules = coursemapModules;\r\n\t\tthis.course = course;\r\n\r\n\t\tconst user = getUser();\r\n\r\n\t\tif (user) {\r\n\t\t\tthis.props.getUserModules({\r\n\t\t\t\tuserId: user.id,\r\n\t\t\t\tcourseId: this.coursemapModules[this.course].id\r\n\t\t\t}, (userModules:any) => {\r\n\t\t\t\tuserModules = userModules\r\n\t\t\t\t.filter((userModule:any) => userModule.progression === 100)\r\n\t\t\t\t.map((userModule:any) => userModule.module_id)\r\n\t\t\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tuserModules\r\n\t\t\t\t})\r\n\t\t\t})\t\r\n\t\t}\r\n\t}\r\n\r\n\tdetermineModuleStatus (moduleId:any) {\r\n\t\tconst userModules:any = this.state.userModules || [];\r\n\r\n\t\treturn userModules.includes(moduleId - 1)\r\n\t}\r\n\r\n\tpublic render(): JSX.Element {\r\n\t\treturn (\r\n\t\t\t<div className=\"d-flex flex-column\">\r\n\t\t\t\t<Head>\r\n\t\t\t\t\t<title>My Coursemap | 1Life</title>\r\n\t\t\t\t</Head>\r\n\t\t\t\t<section className=\"container\">\r\n\t\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t\t<nav className={'navbar navbar-expand-lg navbar-light bg-white mb-4'}>\r\n\t\t\t\t\t\t\t<div className=\"navbar-collapse\" id=\"navbarTogglerDemo01\">\r\n\t\t\t\t\t\t\t\t<span className={'navbar-brand mb-0 h1'}>\r\n\t\t\t\t\t\t\t\t\t<img className={'img'} width={50} src={'/static/img/splashLogo.webp'} alt=\"\"/>\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t<ul className=\"navbar-nav mr-auto mt-2 mt-lg-0\">\r\n\t\t\t\t\t\t\t\t\t<li className=\"nav-item active\">\r\n\t\t\t\t\t\t\t\t\t\t<a className=\"nav-link\" href=\"#\">Home <span className=\"sr-only\">(current)</span></a>\r\n\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t\t\t<button className={'navbar-toggler'} type={'button'} data-toggle={'collapse'} data-target='#navbarTogglerDemo01' aria-controls=\"navbarTogglerDemo01\" aria-expanded='false' aria-label='Toggle navigation'>\r\n\t\t\t\t\t\t\t\t\t<span className=\"navbar-toggler-icon\"></span>\r\n\t\t\t\t\t\t\t\t</button>\r\n\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</nav>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</section>\r\n\r\n\t\t\t\t<section className=\"container\">\r\n\t\t\t\t\t<div className=\"row pb-4\">\r\n\t\t\t\t\t\t<section className=\"col-md-12 mb-5\">\r\n\t\t\t\t\t\t\t<div className={'d-flex align-items-center'}>\r\n\t\t\t\t\t\t\t\t<img src={'/static/img/cap.svg'} className={'mr-3'} width={100} />\r\n\t\t\t\t\t\t\t\t<h1 className={'h4 coursemap-title text-gray'}>Course Modules</h1>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</section>\r\n\t\t\t\t\t\t{ this.course.length > 0 && \r\n\t\t\t\t\t\t\tObject\r\n\t\t\t\t\t\t\t.keys(this.coursemapModules[this.course].modules)\r\n\t\t\t\t\t\t\t.filter(moduleKey => moduleKey !== '__route')\r\n\t\t\t\t\t\t\t.map((moduleKey:string, idx) => {\r\n\t\t\t\t\t\t\t\tconst moduleObj:any = this.coursemapModules[this.course].modules[moduleKey];\r\n\t\t\t\t\t\t\t\tlet { title, id, lessons } = moduleObj\r\n\t\t\t\t\t\t\t\tconst lessonsCount = lessons && Object.keys(lessons).length;\r\n\r\n\r\n\t\t\t\t\t\t\t\treturn (this.determineModuleStatus(id) || idx === 0) ? (\r\n\t\t\t\t\t\t\t\t\t<section className=\"col-md-12 mb-4\" key={idx}>\r\n\t\t\t\t\t\t\t\t\t\t<div className={'text-center card coursemap-listing coursemap-listing--active'}>\r\n\t\t\t\t\t\t\t\t\t\t\t<section className=\"d-flex flex-column align-items-center\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"coursemap-listing__number font-weight-bold mb-2\">{idx + 1}</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<h3 className={'h4 coursemap-listing__title mb-0'}>{title}</h3>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"font-style-italic coursemap-listing__subtext text-gray mb-4\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{ lessonsCount } { lessonsCount === 1 ? 'Lesson': 'Lessons'}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Link href={`/courses/${this.course}/${moduleKey}`}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<button className=\"btn btn-success coursemap-listing__btn\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className={'mr-2'}>Let's Go</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ArrowRightIcon />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t\t\t\t</section>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</section>\r\n\t\t\t\t\t\t\t\t): (\r\n\t\t\t\t\t\t\t\t\t<section className=\"col-md-12 mb-4\" key={idx}>\r\n\t\t\t\t\t\t\t\t\t\t<div className={'text-center card coursemap-listing'}>\r\n\t\t\t\t\t\t\t\t\t\t\t<img src=\"/static/img/lock.svg\" className=\"coursemap-listing__icon\" alt=\"\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t<section className=\"d-flex flex-column align-items-center\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"coursemap-listing__number font-weight-bold mb-2\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t{idx + 1}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<h3 className={'h4 coursemap-listing__title'}>{this.coursemapModules[this.course].modules[moduleKey].title}</h3>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"font-style-italic coursemap-listing__subtext text-gray\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{this.coursemapModules[this.course].modules[moduleKey].lessons ?\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tObject.keys(this.coursemapModules[this.course].modules[moduleKey].lessons).length:0} Lessons\r\n\t\t\t\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t\t\t</section>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</section>\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</section>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = (state: IStore) => {\r\n\treturn {\r\n\t\tapp: state.app\r\n\t}\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch:Dispatch) => (\r\n\t{\r\n\t\tgetUserModules: bindActionCreators(AppActions.getUserModules, dispatch)\r\n\t}\r\n);\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(CoursemapPage);"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AAKA;AAEA;AAAA;AAAA;AAAA;AACA;AAGA;AAAA;AACA;AADA;AACA;AAAA;AACA;AAFA;AACA;AADA;AACA;AAEA;AACA;AADA;AAHA;AAMA;AACA;AAXA;AAAA;AAAA;AAYA;AACA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA;AAOA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AAtCA;AAAA;AAAA;AAyCA;AAEA;AACA;AA5CA;AAAA;AAAA;AA8CA;AACA;AAAA;AACA;AAAA;AAIA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAQA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAMA;AAAA;AAEA;AADA;AAAA;AAAA;AAGA;AAGA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAIA;AAAA;AACA;AAAA;AACA;AAAA;AAQA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AAGA;AAAA;AACA;AAAA;AAQA;AAMA;AArIA;AACA;AADA;AAAA;AACA;AAuIA;AACA;AACA;AADA;AAGA;AACA;AACA;AAAA;AAEA;AADA;AADA;AACA;AAKA;;;;;;;;;;;;;;;;;;;;;;;A","sourceRoot":""}